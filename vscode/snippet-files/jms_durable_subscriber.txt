Name : JMS_Durable_Subscriber
Trigger : jms/durable_subscriber
Imports : wso2/jms

jms:Connection connection = check jms:createConnection({
    initialContextFactory: "${org.apache.activemq.jndi.ActiveMQInitialContextFactory}",
    providerUrl: "${tcp://localhost:61616}"
});
jms:Session session = check connection->createSession({acknowledgementMode: "${AUTO_ACKNOWLEDGE}"});
jms:Destination topic = check session->createTopic("${topic_name}");

listener jms:MessageConsumer jmsConsumer = check session->createDurableSubscriber(topic, "${subscription_name}");

service messageListener on jmsConsumer {

    resource function onMessage(jms:Message message) {

    }
}
